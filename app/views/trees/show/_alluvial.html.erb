<script type="text/javascript">

  data = {
    "data": [
        {
          "type": "sankey",
          "arrangment": "fixed",
          "domain": {
            "x": [
              0,
              1
            ],
            "y": [
              0,
              1
            ]
          },
          "node": {
            "pad": 50,
            "thickness": 20,
            "line": {
              "color": "black",
              "width": 0.5
            },
            "label": JSON.parse('<%= alluvial_nodes.to_json.html_safe %>'),
            "color": JSON.parse('<%= alluvial_node_colors.to_json.html_safe %>'),
          },
          "link": JSON.parse('<%= alluvial_links.to_json.html_safe %>')
        }],
    "layout": {
      // "title": "<%= chart_name %>",
       // "width": Math.floor($("#js-alluvial-container").width() - 20),
       // "height": 400,
      "showlegend": false,
      "font": {
          "size": 10
      },
    }
  }

  var config = {
    responsive: true,
    displayModeBar: false,
    locale: '<%= @locale_code %>',
    displaylogo: false,
  }

  Plotly.plot('js-alluvial-container', data.data, data.layout, config);

</script>